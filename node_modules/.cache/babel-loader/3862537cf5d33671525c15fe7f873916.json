{"ast":null,"code":"import { __awaiter as e } from \"tslib\";\nimport { jsx as t, jsxs as o } from \"react/jsx-runtime\";\nimport i from \"qrcode\";\nimport * as r from \"react\";\nimport { Logger as a } from \"aws-amplify\";\nimport { authenticatorTextUtil as s, getTotpCodeURL as n } from \"@aws-amplify/ui\";\nimport { Flex as m } from \"../../../primitives/Flex/Flex.js\";\nimport { Heading as d } from \"../../../primitives/Heading/Heading.js\";\nimport { useAuthenticator as l } from \"@aws-amplify/ui-react-core\";\nimport { useCustomComponents as c } from \"../hooks/useCustomComponents/index.js\";\nimport { useFormHandlers as p } from \"../hooks/useFormHandlers/useFormHandlers.js\";\nimport { ConfirmSignInFooter as u } from \"../shared/ConfirmSignInFooter.js\";\nimport { RemoteErrorMessage as f } from \"../shared/RemoteErrorMessage.js\";\nimport { FormFields as g } from \"../shared/FormFields.js\";\nimport { RouteContainer as h } from \"../RouteContainer/RouteContainer.js\";\n\nconst v = new a(\"SetupTOTP-logger\"),\n      {\n  getSetupTOTPText: j,\n  getCopiedText: C,\n  getLoadingText: y\n} = s,\n      b = _ref => {\n  let {\n    className: a,\n    variation: s\n  } = _ref;\n  var d;\n  const {\n    fields: j,\n    getTotpSecretCode: H,\n    isPending: O,\n    user: w\n  } = l(e => [e.isPending]),\n        {\n    handleChange: S,\n    handleSubmit: x\n  } = p(),\n        {\n    components: {\n      SetupTOTP: {\n        Header: T = b.Header,\n        Footer: F = b.Footer\n      }\n    }\n  } = c(),\n        [V, P] = r.useState(!0),\n        [R, k] = r.useState(),\n        [L, M] = r.useState(\"COPY\"),\n        [q, Z] = r.useState(\"\"),\n        {\n    totpIssuer: D = \"AWSCognito\",\n    totpUsername: E = null == w ? void 0 : w.username\n  } = null !== (d = null == j ? void 0 : j.QR) && void 0 !== d ? d : {},\n        I = r.useCallback(() => e(void 0, void 0, void 0, function* () {\n    try {\n      const e = yield H();\n      Z(e);\n      const t = n(D, E, e),\n            o = yield i.toDataURL(t);\n      k(o);\n    } catch (e) {\n      v.error(e);\n    } finally {\n      P(!1);\n    }\n  }), [H, D, E]);\n  r.useEffect(() => {\n    R || I();\n  }, [I, R]);\n  return t(h, Object.assign({\n    className: a,\n    variation: s\n  }, {\n    children: t(\"form\", Object.assign({\n      \"data-amplify-form\": \"\",\n      \"data-amplify-authenticator-setup-totp\": \"\",\n      method: \"post\",\n      onChange: S,\n      onSubmit: x\n    }, {\n      children: o(m, Object.assign({\n        as: \"fieldset\",\n        direction: \"column\",\n        isDisabled: O\n      }, {\n        children: [t(T, {}), o(m, Object.assign({\n          direction: \"column\"\n        }, {\n          children: [V ? o(\"p\", {\n            children: [y(), \"…\"]\n          }) : t(\"img\", {\n            \"data-amplify-qrcode\": !0,\n            src: R,\n            alt: \"qr code\",\n            width: \"228\",\n            height: \"228\"\n          }), o(m, Object.assign({\n            \"data-amplify-copy\": !0\n          }, {\n            children: [t(\"div\", {\n              children: q\n            }), o(m, Object.assign({\n              \"data-amplify-copy-svg\": !0,\n              onClick: () => {\n                navigator.clipboard.writeText(q), M(C());\n              }\n            }, {\n              children: [t(\"div\", Object.assign({\n                \"data-amplify-copy-tooltip\": !0\n              }, {\n                children: L\n              })), t(\"svg\", Object.assign({\n                width: \"24\",\n                height: \"24\",\n                viewBox: \"0 0 24 24\",\n                xmlns: \"http://www.w3.org/2000/svg\"\n              }, {\n                children: t(\"path\", {\n                  d: \"M16 1H4C2.9 1 2 1.9 2 3V17H4V3H16V1ZM15 5H8C6.9 5 6.01 5.9 6.01 7L6 21C6 22.1 6.89 23 7.99 23H19C20.1 23 21 22.1 21 21V11L15 5ZM8 21V7H14V12H19V21H8Z\"\n                })\n              }))]\n            }))]\n          })), t(g, {}), t(f, {})]\n        })), t(u, {}), t(F, {})]\n      }))\n    }))\n  }));\n};\n\nb.Header = function () {\n  return t(d, Object.assign({\n    level: 3\n  }, {\n    children: j()\n  }));\n}, b.Footer = function () {\n  return null;\n};\nexport { b as SetupTOTP };","map":{"version":3,"sources":["/home/dalienst/node_modules/@aws-amplify/ui-react/dist/esm/components/Authenticator/SetupTOTP/SetupTOTP.js"],"names":["__awaiter","e","jsx","t","jsxs","o","i","r","Logger","a","authenticatorTextUtil","s","getTotpCodeURL","n","Flex","m","Heading","d","useAuthenticator","l","useCustomComponents","c","useFormHandlers","p","ConfirmSignInFooter","u","RemoteErrorMessage","f","FormFields","g","RouteContainer","h","v","getSetupTOTPText","j","getCopiedText","C","getLoadingText","y","b","className","variation","fields","getTotpSecretCode","H","isPending","O","user","w","handleChange","S","handleSubmit","x","components","SetupTOTP","Header","T","Footer","F","V","P","useState","R","k","L","M","q","Z","totpIssuer","D","totpUsername","E","username","QR","I","useCallback","toDataURL","error","useEffect","Object","assign","children","method","onChange","onSubmit","as","direction","isDisabled","src","alt","width","height","onClick","navigator","clipboard","writeText","viewBox","xmlns","level"],"mappings":"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","sourcesContent":["import{__awaiter as e}from\"tslib\";import{jsx as t,jsxs as o}from\"react/jsx-runtime\";import i from\"qrcode\";import*as r from\"react\";import{Logger as a}from\"aws-amplify\";import{authenticatorTextUtil as s,getTotpCodeURL as n}from\"@aws-amplify/ui\";import{Flex as m}from\"../../../primitives/Flex/Flex.js\";import{Heading as d}from\"../../../primitives/Heading/Heading.js\";import{useAuthenticator as l}from\"@aws-amplify/ui-react-core\";import{useCustomComponents as c}from\"../hooks/useCustomComponents/index.js\";import{useFormHandlers as p}from\"../hooks/useFormHandlers/useFormHandlers.js\";import{ConfirmSignInFooter as u}from\"../shared/ConfirmSignInFooter.js\";import{RemoteErrorMessage as f}from\"../shared/RemoteErrorMessage.js\";import{FormFields as g}from\"../shared/FormFields.js\";import{RouteContainer as h}from\"../RouteContainer/RouteContainer.js\";const v=new a(\"SetupTOTP-logger\"),{getSetupTOTPText:j,getCopiedText:C,getLoadingText:y}=s,b=({className:a,variation:s})=>{var d;const{fields:j,getTotpSecretCode:H,isPending:O,user:w}=l((e=>[e.isPending])),{handleChange:S,handleSubmit:x}=p(),{components:{SetupTOTP:{Header:T=b.Header,Footer:F=b.Footer}}}=c(),[V,P]=r.useState(!0),[R,k]=r.useState(),[L,M]=r.useState(\"COPY\"),[q,Z]=r.useState(\"\"),{totpIssuer:D=\"AWSCognito\",totpUsername:E=(null==w?void 0:w.username)}=null!==(d=null==j?void 0:j.QR)&&void 0!==d?d:{},I=r.useCallback((()=>e(void 0,void 0,void 0,(function*(){try{const e=yield H();Z(e);const t=n(D,E,e),o=yield i.toDataURL(t);k(o)}catch(e){v.error(e)}finally{P(!1)}}))),[H,D,E]);r.useEffect((()=>{R||I()}),[I,R]);return t(h,Object.assign({className:a,variation:s},{children:t(\"form\",Object.assign({\"data-amplify-form\":\"\",\"data-amplify-authenticator-setup-totp\":\"\",method:\"post\",onChange:S,onSubmit:x},{children:o(m,Object.assign({as:\"fieldset\",direction:\"column\",isDisabled:O},{children:[t(T,{}),o(m,Object.assign({direction:\"column\"},{children:[V?o(\"p\",{children:[y(),\"…\"]}):t(\"img\",{\"data-amplify-qrcode\":!0,src:R,alt:\"qr code\",width:\"228\",height:\"228\"}),o(m,Object.assign({\"data-amplify-copy\":!0},{children:[t(\"div\",{children:q}),o(m,Object.assign({\"data-amplify-copy-svg\":!0,onClick:()=>{navigator.clipboard.writeText(q),M(C())}},{children:[t(\"div\",Object.assign({\"data-amplify-copy-tooltip\":!0},{children:L})),t(\"svg\",Object.assign({width:\"24\",height:\"24\",viewBox:\"0 0 24 24\",xmlns:\"http://www.w3.org/2000/svg\"},{children:t(\"path\",{d:\"M16 1H4C2.9 1 2 1.9 2 3V17H4V3H16V1ZM15 5H8C6.9 5 6.01 5.9 6.01 7L6 21C6 22.1 6.89 23 7.99 23H19C20.1 23 21 22.1 21 21V11L15 5ZM8 21V7H14V12H19V21H8Z\"})}))]}))]})),t(g,{}),t(f,{})]})),t(u,{}),t(F,{})]}))}))}))};b.Header=function(){return t(d,Object.assign({level:3},{children:j()}))},b.Footer=function(){return null};export{b as SetupTOTP};\n"]},"metadata":{},"sourceType":"module"}