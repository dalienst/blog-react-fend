{"ast":null,"code":"import * as e from \"react\";\nimport { ARROW_UP as t, ARROW_DOWN as o, ENTER_KEY as n, ESCAPE_KEY as l } from \"../shared/constants.js\";\nimport { isFunction as s } from \"../shared/utils.js\";\nimport { useStableId as i } from \"../utils/useStableId.js\";\n\nconst c = new Set([o, t, n, l]),\n      a = _ref => {\n  let {\n    defaultValue: a = \"\",\n    value: u,\n    options: r,\n    optionFilter: d,\n    onBlur: m,\n    onChange: f,\n    onClear: h,\n    onClick: p,\n    onSelect: g,\n    onSubmit: b\n  } = _ref;\n  const C = void 0 !== u,\n        [I, v] = e.useState(a),\n        k = C ? u : I,\n        [w, O] = e.useState(!1),\n        [B, E] = e.useState(null),\n        y = s(d),\n        S = e.useMemo(() => {\n    const e = y ? e => d(e, k) : e => {\n      const {\n        label: t\n      } = e;\n      return null == t ? void 0 : t.toLocaleLowerCase().includes(null == k ? void 0 : k.toLocaleLowerCase());\n    };\n    return (null == r ? void 0 : r.filter(e)) || [];\n  }, [k, d, y, r]),\n        T = i(),\n        H = i(),\n        L = i(),\n        M = i(),\n        V = S.findIndex(e => e === B),\n        j = (null == B ? void 0 : B.id) || (-1 !== V ? `${M}-option-${V}` : void 0),\n        x = e.useCallback(e => {\n    O(!1), E(null), s(m) && m(e);\n  }, [m]),\n        D = e.useCallback(e => {\n    E(null), O(!0), C || v(e.target.value), s(f) && f(e);\n  }, [C, f]),\n        F = e.useCallback(() => {\n    C || v(\"\"), s(h) && h();\n  }, [C, h]),\n        R = e.useCallback(e => {\n    O(!0), s(p) && p(e);\n  }, [p]);\n  return e.useEffect(() => {\n    const e = document.getElementById(T),\n          t = document.getElementById(L);\n\n    if (t && w) {\n      const {\n        bottom: o\n      } = t.getBoundingClientRect(),\n            {\n        offsetParent: n,\n        offsetTop: l\n      } = e;\n      n === document.body && o > document.documentElement.clientHeight && window.scrollTo({\n        top: Math.min(o - document.documentElement.clientHeight + window.scrollY + 20, l),\n        behavior: \"smooth\"\n      });\n    }\n  }, [T, w, L]), e.useEffect(() => {\n    const e = document.getElementById(H),\n          t = document.getElementById(j);\n\n    if (t && e) {\n      const {\n        scrollTop: o,\n        clientHeight: n\n      } = e,\n            {\n        offsetHeight: l,\n        offsetTop: s\n      } = t,\n            {\n        top: i,\n        bottom: c\n      } = t.getBoundingClientRect();\n      o > s && (e.scrollTop = s), o + n < s + l && (e.scrollTop = s + l - n), (i < 0 || c > document.documentElement.clientHeight) && t.scrollIntoView({\n        behavior: \"smooth\",\n        block: \"nearest\"\n      });\n    }\n  }, [j, H]), {\n    activeOptionId: j,\n    autocompleteId: T,\n    composedValue: k,\n    filteredOptions: S,\n    handleOnBlur: x,\n    handleOnClear: F,\n    handleOnClick: R,\n    handleOnChange: D,\n    handleOnKeyDown: e => {\n      const {\n        key: i\n      } = e;\n      if (c.has(i)) switch (e.preventDefault(), i) {\n        case l:\n          w ? (O(!1), E(null)) : F();\n          break;\n\n        case n:\n          if (B) {\n            const {\n              label: e\n            } = B;\n            C || v(e), s(g) && g(B);\n          } else s(b) && b(k);\n\n          O(!1), E(null);\n          break;\n\n        case o:\n          {\n            if (S.length <= 0) return;\n            O(!0);\n            const e = V >= S.length - 1 ? 0 : V + 1;\n            E(S[e]);\n            break;\n          }\n\n        case t:\n          {\n            if (S.length <= 0) return;\n            O(!0);\n            const e = V <= 0 ? S.length - 1 : V - 1;\n            E(S[e]);\n          }\n      }\n    },\n    isControlled: C,\n    isCustomFiltering: y,\n    isMenuOpen: w,\n    listboxId: H,\n    menuId: L,\n    optionBaseId: M,\n    setActiveOption: E,\n    setIsMenuOpen: O,\n    setInternalValue: v\n  };\n};\n\nexport { a as useAutocomplete };","map":{"version":3,"sources":["/home/dalienst/node_modules/@aws-amplify/ui-react/dist/esm/primitives/Autocomplete/useAutocomplete.js"],"names":["e","ARROW_UP","t","ARROW_DOWN","o","ENTER_KEY","n","ESCAPE_KEY","l","isFunction","s","useStableId","i","c","Set","a","defaultValue","value","u","options","r","optionFilter","d","onBlur","m","onChange","f","onClear","h","onClick","p","onSelect","g","onSubmit","b","C","I","v","useState","k","w","O","B","E","y","S","useMemo","label","toLocaleLowerCase","includes","filter","T","H","L","M","V","findIndex","j","id","x","useCallback","D","target","F","R","useEffect","document","getElementById","bottom","getBoundingClientRect","offsetParent","offsetTop","body","documentElement","clientHeight","window","scrollTo","top","Math","min","scrollY","behavior","scrollTop","offsetHeight","scrollIntoView","block","activeOptionId","autocompleteId","composedValue","filteredOptions","handleOnBlur","handleOnClear","handleOnClick","handleOnChange","handleOnKeyDown","key","has","preventDefault","length","isControlled","isCustomFiltering","isMenuOpen","listboxId","menuId","optionBaseId","setActiveOption","setIsMenuOpen","setInternalValue","useAutocomplete"],"mappings":"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","sourcesContent":["import*as e from\"react\";import{ARROW_UP as t,ARROW_DOWN as o,ENTER_KEY as n,ESCAPE_KEY as l}from\"../shared/constants.js\";import{isFunction as s}from\"../shared/utils.js\";import{useStableId as i}from\"../utils/useStableId.js\";const c=new Set([o,t,n,l]),a=({defaultValue:a=\"\",value:u,options:r,optionFilter:d,onBlur:m,onChange:f,onClear:h,onClick:p,onSelect:g,onSubmit:b})=>{const C=void 0!==u,[I,v]=e.useState(a),k=C?u:I,[w,O]=e.useState(!1),[B,E]=e.useState(null),y=s(d),S=e.useMemo((()=>{const e=y?e=>d(e,k):e=>{const{label:t}=e;return null==t?void 0:t.toLocaleLowerCase().includes(null==k?void 0:k.toLocaleLowerCase())};return(null==r?void 0:r.filter(e))||[]}),[k,d,y,r]),T=i(),H=i(),L=i(),M=i(),V=S.findIndex((e=>e===B)),j=(null==B?void 0:B.id)||(-1!==V?`${M}-option-${V}`:void 0),x=e.useCallback((e=>{O(!1),E(null),s(m)&&m(e)}),[m]),D=e.useCallback((e=>{E(null),O(!0),C||v(e.target.value),s(f)&&f(e)}),[C,f]),F=e.useCallback((()=>{C||v(\"\"),s(h)&&h()}),[C,h]),R=e.useCallback((e=>{O(!0),s(p)&&p(e)}),[p]);return e.useEffect((()=>{const e=document.getElementById(T),t=document.getElementById(L);if(t&&w){const{bottom:o}=t.getBoundingClientRect(),{offsetParent:n,offsetTop:l}=e;n===document.body&&o>document.documentElement.clientHeight&&window.scrollTo({top:Math.min(o-document.documentElement.clientHeight+window.scrollY+20,l),behavior:\"smooth\"})}}),[T,w,L]),e.useEffect((()=>{const e=document.getElementById(H),t=document.getElementById(j);if(t&&e){const{scrollTop:o,clientHeight:n}=e,{offsetHeight:l,offsetTop:s}=t,{top:i,bottom:c}=t.getBoundingClientRect();o>s&&(e.scrollTop=s),o+n<s+l&&(e.scrollTop=s+l-n),(i<0||c>document.documentElement.clientHeight)&&t.scrollIntoView({behavior:\"smooth\",block:\"nearest\"})}}),[j,H]),{activeOptionId:j,autocompleteId:T,composedValue:k,filteredOptions:S,handleOnBlur:x,handleOnClear:F,handleOnClick:R,handleOnChange:D,handleOnKeyDown:e=>{const{key:i}=e;if(c.has(i))switch(e.preventDefault(),i){case l:w?(O(!1),E(null)):F();break;case n:if(B){const{label:e}=B;C||v(e),s(g)&&g(B)}else s(b)&&b(k);O(!1),E(null);break;case o:{if(S.length<=0)return;O(!0);const e=V>=S.length-1?0:V+1;E(S[e]);break}case t:{if(S.length<=0)return;O(!0);const e=V<=0?S.length-1:V-1;E(S[e])}}},isControlled:C,isCustomFiltering:y,isMenuOpen:w,listboxId:H,menuId:L,optionBaseId:M,setActiveOption:E,setIsMenuOpen:O,setInternalValue:v}};export{a as useAutocomplete};\n"]},"metadata":{},"sourceType":"module"}