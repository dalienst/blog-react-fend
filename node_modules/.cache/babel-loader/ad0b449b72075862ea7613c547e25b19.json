{"ast":null,"code":"import { __awaiter as t, __generator as n } from \"tslib\";\nimport { Hub as e } from \"aws-amplify\";\nimport { waitFor as r } from \"xstate/lib/waitFor\";\nimport { ALLOWED_SPECIAL_CHARACTERS as a } from \"./constants.js\";\nimport { getActorState as o } from \"./actor.js\";\n\nvar u = function (t) {\n  for (var n = t.trim().split(\"\"), e = 0; e < n.length; e++) e > 0 && e < n.length - 1 && (n[e] = \"*\");\n\n  return n.join(\"\");\n},\n    i = function (t) {\n  if (t.length < 4) return t;\n\n  for (var n = t.split(\"\"), e = 0; e < n.length - 4; e++) n[e] = \"*\";\n\n  return n.join(\"\");\n},\n    c = function (e) {\n  return t(void 0, void 0, void 0, function () {\n    return n(this, function (t) {\n      switch (t.label) {\n        case 0:\n          return t.trys.push([0, 2,, 3]), [4, r(e, function (t) {\n            return o(t).matches(\"autoSignIn\");\n          })];\n\n        case 1:\n        case 2:\n          return t.sent(), [3, 3];\n\n        case 3:\n          return [2];\n      }\n    });\n  });\n},\n    s = function (e, r) {\n  return t(void 0, void 0, void 0, function () {\n    var t, a, u, i;\n    return n(this, function (n) {\n      switch (n.label) {\n        case 0:\n          switch (t = r.send, a = r.getSnapshot(), e.payload.event) {\n            case \"tokenRefresh\":\n              return [3, 1];\n\n            case \"autoSignIn\":\n              return [3, 2];\n\n            case \"autoSignIn_failure\":\n              return [3, 5];\n\n            case \"signOut\":\n            case \"tokenRefresh_failure\":\n              return [3, 7];\n          }\n\n          return [3, 8];\n\n        case 1:\n          return a.matches(\"authenticated.idle\") && t(\"TOKEN_REFRESH\"), [3, 9];\n\n        case 2:\n          return a.matches(\"authenticated\") ? [3, 4] : [4, c(r)];\n\n        case 3:\n          n.sent(), (null == (u = o(r.getSnapshot())) ? void 0 : u.matches(\"autoSignIn\")) && t({\n            type: \"AUTO_SIGN_IN\",\n            data: e.payload.data\n          }), n.label = 4;\n\n        case 4:\n          return [3, 9];\n\n        case 5:\n          return [4, c(r)];\n\n        case 6:\n          return n.sent(), (null == (i = o(r.getSnapshot())) ? void 0 : i.matches(\"autoSignIn\")) && t({\n            type: \"AUTO_SIGN_IN_FAILURE\",\n            data: e.payload.data\n          }), [3, 9];\n\n        case 7:\n          return a.matches(\"authenticated.idle\") && t(\"SIGN_OUT\"), [3, 9];\n\n        case 8:\n          return [3, 9];\n\n        case 9:\n          return [2];\n      }\n    });\n  });\n},\n    h = function (t, n) {\n  return void 0 === n && (n = s), e.listen(\"auth\", function (t, n) {\n    return function (e) {\n      n(e, t);\n    };\n  }(t, n), \"authenticator-hub-handler\");\n},\n    l = function (t) {\n  return a.some(function (n) {\n    return t.includes(n);\n  });\n},\n    f = function (t, n, e) {\n  return encodeURI(\"otpauth://totp/\".concat(t, \":\").concat(n, \"?secret=\").concat(e, \"&issuer=\").concat(t));\n};\n\nexport { u as censorAllButFirstAndLast, i as censorPhoneNumber, s as defaultAuthHubHandler, f as getTotpCodeURL, l as hasSpecialChars, h as listenToAuthHub };","map":{"version":3,"sources":["/home/dalienst/node_modules/@aws-amplify/ui/dist/esm/helpers/authenticator/utils.js"],"names":["__awaiter","t","__generator","n","Hub","e","waitFor","r","ALLOWED_SPECIAL_CHARACTERS","a","getActorState","o","u","trim","split","length","join","i","c","label","trys","push","matches","sent","s","send","getSnapshot","payload","event","type","data","h","listen","l","some","includes","f","encodeURI","concat","censorAllButFirstAndLast","censorPhoneNumber","defaultAuthHubHandler","getTotpCodeURL","hasSpecialChars","listenToAuthHub"],"mappings":"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","sourcesContent":["import{__awaiter as t,__generator as n}from\"tslib\";import{Hub as e}from\"aws-amplify\";import{waitFor as r}from\"xstate/lib/waitFor\";import{ALLOWED_SPECIAL_CHARACTERS as a}from\"./constants.js\";import{getActorState as o}from\"./actor.js\";var u=function(t){for(var n=t.trim().split(\"\"),e=0;e<n.length;e++)e>0&&e<n.length-1&&(n[e]=\"*\");return n.join(\"\")},i=function(t){if(t.length<4)return t;for(var n=t.split(\"\"),e=0;e<n.length-4;e++)n[e]=\"*\";return n.join(\"\")},c=function(e){return t(void 0,void 0,void 0,(function(){return n(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,r(e,(function(t){return o(t).matches(\"autoSignIn\")}))];case 1:case 2:return t.sent(),[3,3];case 3:return[2]}}))}))},s=function(e,r){return t(void 0,void 0,void 0,(function(){var t,a,u,i;return n(this,(function(n){switch(n.label){case 0:switch(t=r.send,a=r.getSnapshot(),e.payload.event){case\"tokenRefresh\":return[3,1];case\"autoSignIn\":return[3,2];case\"autoSignIn_failure\":return[3,5];case\"signOut\":case\"tokenRefresh_failure\":return[3,7]}return[3,8];case 1:return a.matches(\"authenticated.idle\")&&t(\"TOKEN_REFRESH\"),[3,9];case 2:return a.matches(\"authenticated\")?[3,4]:[4,c(r)];case 3:n.sent(),(null==(u=o(r.getSnapshot()))?void 0:u.matches(\"autoSignIn\"))&&t({type:\"AUTO_SIGN_IN\",data:e.payload.data}),n.label=4;case 4:return[3,9];case 5:return[4,c(r)];case 6:return n.sent(),(null==(i=o(r.getSnapshot()))?void 0:i.matches(\"autoSignIn\"))&&t({type:\"AUTO_SIGN_IN_FAILURE\",data:e.payload.data}),[3,9];case 7:return a.matches(\"authenticated.idle\")&&t(\"SIGN_OUT\"),[3,9];case 8:return[3,9];case 9:return[2]}}))}))},h=function(t,n){return void 0===n&&(n=s),e.listen(\"auth\",function(t,n){return function(e){n(e,t)}}(t,n),\"authenticator-hub-handler\")},l=function(t){return a.some((function(n){return t.includes(n)}))},f=function(t,n,e){return encodeURI(\"otpauth://totp/\".concat(t,\":\").concat(n,\"?secret=\").concat(e,\"&issuer=\").concat(t))};export{u as censorAllButFirstAndLast,i as censorPhoneNumber,s as defaultAuthHubHandler,f as getTotpCodeURL,l as hasSpecialChars,h as listenToAuthHub};\n"]},"metadata":{},"sourceType":"module"}