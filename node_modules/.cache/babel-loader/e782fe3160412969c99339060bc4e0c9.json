{"ast":null,"code":"'use strict';\n\nvar List = function (component) {\n  this.component = component;\n  this.items = [];\n  this.active = component.options.noInitialSelection ? -1 : 0;\n  this.wrapper = document.createElement('div');\n  this.wrapper.className = 'suggestions-wrapper';\n  this.element = document.createElement('ul');\n  this.element.className = 'suggestions';\n  this.wrapper.appendChild(this.element); // selectingListItem is set to true in the time between the mousedown and mouseup when clicking an item in the list\n  // mousedown on a list item will cause the input to blur which normally hides the list, so this flag is used to keep\n  // the list open until the mouseup\n\n  this.selectingListItem = false;\n  component.el.parentNode.insertBefore(this.wrapper, component.el.nextSibling);\n  return this;\n};\n\nList.prototype.show = function () {\n  this.element.style.display = 'block';\n};\n\nList.prototype.hide = function () {\n  this.element.style.display = 'none';\n};\n\nList.prototype.add = function (item) {\n  this.items.push(item);\n};\n\nList.prototype.clear = function () {\n  this.items = [];\n  this.active = this.component.options.noInitialSelection ? -1 : 0;\n};\n\nList.prototype.isEmpty = function () {\n  return !this.items.length;\n};\n\nList.prototype.isVisible = function () {\n  return this.element.style.display === 'block';\n};\n\nList.prototype.draw = function () {\n  this.element.innerHTML = '';\n\n  if (this.items.length === 0) {\n    this.hide();\n    return;\n  }\n\n  for (var i = 0; i < this.items.length; i++) {\n    this.drawItem(this.items[i], this.active === i);\n  }\n\n  this.show();\n};\n\nList.prototype.drawItem = function (item, active) {\n  var li = document.createElement('li'),\n      a = document.createElement('a');\n  if (active) li.className += ' active';\n  a.innerHTML = item.string;\n  li.appendChild(a);\n  this.element.appendChild(li);\n  li.addEventListener('mousedown', function () {\n    this.selectingListItem = true;\n  }.bind(this));\n  li.addEventListener('mouseup', function () {\n    this.handleMouseUp.call(this, item);\n  }.bind(this));\n};\n\nList.prototype.handleMouseUp = function (item) {\n  this.selectingListItem = false;\n  this.component.value(item.original);\n  this.clear();\n  this.draw();\n};\n\nList.prototype.move = function (index) {\n  this.active = index;\n  this.draw();\n};\n\nList.prototype.previous = function () {\n  this.move(this.active <= 0 ? this.items.length - 1 : this.active - 1);\n};\n\nList.prototype.next = function () {\n  this.move(this.active >= this.items.length - 1 ? 0 : this.active + 1);\n};\n\nList.prototype.drawError = function (msg) {\n  var li = document.createElement('li');\n  li.innerHTML = msg;\n  this.element.appendChild(li);\n  this.show();\n};\n\nmodule.exports = List;","map":{"version":3,"sources":["/home/dalienst/node_modules/suggestions-list/src/list.js"],"names":["List","component","items","active","options","noInitialSelection","wrapper","document","createElement","className","element","appendChild","selectingListItem","el","parentNode","insertBefore","nextSibling","prototype","show","style","display","hide","add","item","push","clear","isEmpty","length","isVisible","draw","innerHTML","i","drawItem","li","a","string","addEventListener","bind","handleMouseUp","call","value","original","move","index","previous","next","drawError","msg","module","exports"],"mappings":"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","sourcesContent":["'use strict';\n\nvar List = function(component) {\n  this.component = component;\n  this.items = [];\n  this.active = component.options.noInitialSelection ? -1 : 0;\n  this.wrapper = document.createElement('div');\n  this.wrapper.className = 'suggestions-wrapper';\n  this.element = document.createElement('ul');\n  this.element.className = 'suggestions';\n  this.wrapper.appendChild(this.element);\n\n  // selectingListItem is set to true in the time between the mousedown and mouseup when clicking an item in the list\n  // mousedown on a list item will cause the input to blur which normally hides the list, so this flag is used to keep\n  // the list open until the mouseup\n  this.selectingListItem = false;\n\n  component.el.parentNode.insertBefore(this.wrapper, component.el.nextSibling);\n  return this;\n};\n\nList.prototype.show = function() {\n  this.element.style.display = 'block';\n};\n\nList.prototype.hide = function() {\n  this.element.style.display = 'none';\n};\n\nList.prototype.add = function(item) {\n  this.items.push(item);\n};\n\nList.prototype.clear = function() {\n  this.items = [];\n  this.active = this.component.options.noInitialSelection ? -1 : 0;\n};\n\nList.prototype.isEmpty = function() {\n  return !this.items.length;\n};\n\nList.prototype.isVisible = function() {\n  return this.element.style.display === 'block';\n};\n\nList.prototype.draw = function() {\n  this.element.innerHTML = '';\n\n  if (this.items.length === 0) {\n    this.hide();\n    return;\n  }\n\n  for (var i = 0; i < this.items.length; i++) {\n    this.drawItem(this.items[i], this.active === i);\n  }\n\n  this.show();\n};\n\nList.prototype.drawItem = function(item, active) {\n  var li = document.createElement('li'),\n    a = document.createElement('a');\n\n  if (active) li.className += ' active';\n\n  a.innerHTML = item.string;\n\n  li.appendChild(a);\n  this.element.appendChild(li);\n\n  li.addEventListener('mousedown', function() {\n    this.selectingListItem = true;\n  }.bind(this));\n\n  li.addEventListener('mouseup', function() {\n    this.handleMouseUp.call(this, item);\n  }.bind(this));\n};\n\nList.prototype.handleMouseUp = function(item) {\n  this.selectingListItem = false;\n  this.component.value(item.original);\n  this.clear();\n  this.draw();\n};\n\nList.prototype.move = function(index) {\n  this.active = index;\n  this.draw();\n};\n\nList.prototype.previous = function() {\n  this.move(this.active <= 0 ? this.items.length - 1 : this.active - 1);\n};\n\nList.prototype.next = function() {\n  this.move(this.active >= this.items.length - 1 ? 0 : this.active + 1);\n};\n\nList.prototype.drawError = function(msg){\n  var li = document.createElement('li');\n\n  li.innerHTML = msg;\n\n  this.element.appendChild(li);\n  this.show();\n}\n\nmodule.exports = List;\n"]},"metadata":{},"sourceType":"script"}